<Window x:Class="UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:UI"
        mc:Ignorable="d"
        Title="MainWindow" Height="600" Width="600">
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="Статистика" Click="StatisticsMenuItem_Click"/>
        </Menu>

        <Grid DockPanel.Dock="Top" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="150"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="Категория:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <ComboBox Grid.Column="1"
          x:Name="CategoryFilterComboBox"
          Margin="0,0,20,0"
          SelectionChanged="CategoryFilterComboBox_SelectionChanged"/>

            <CheckBox Grid.Column="2"
          x:Name="FavoritesFilterCheckBox"
          Content="Избранное"
          VerticalAlignment="Center"
          Margin="0,0,20,0"
          Checked="FavoritesFilterCheckBox_Changed"
          Unchecked="FavoritesFilterCheckBox_Changed"/>

            <Button Grid.Column="4" x:Name="CreateNoteButton" Content="Создать заметку" Margin="0,0,5,0" MinWidth="80" Click="CreateNoteButton_Click"/>
            <Button Grid.Column="5" Content="Удалить заметку" Margin="0,0,5,0" MinWidth="80" Click="DeleteNoteButton_Click"/>
        </Grid>

        <Border Background="GhostWhite" 
        CornerRadius="20" 
        BorderBrush="#CCCCCC"
        BorderThickness="1">
            <DataGrid x:Name="NotesDataGrid"
              AutoGenerateColumns="False"
              Background="GhostWhite"
              Margin="10"
              SelectionMode="Single"
              IsReadOnly="False"
              CanUserReorderColumns="False"
              MouseDoubleClick="NotesDataGrid_MouseDoubleClick"
              RowEditEnding="NotesDataGrid_RowEditEnding">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Заголовок"
                                Binding="{Binding Title, Mode=OneWay}"
                                Width="2*"
                                MinWidth="80"
                                IsReadOnly="True">
                        <DataGridTextColumn.HeaderStyle>
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </DataGridTextColumn.HeaderStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Header="Категория"
                                Binding="{Binding CategoriesDisplay, Mode=OneWay}"
                                Width="*"
                                MinWidth="70"
                                IsReadOnly="True"/>

                    <DataGridTextColumn Header="Дата создания"
                                Binding="{Binding CreatedAt, Mode=OneWay}"
                                Width="*"
                                MinWidth="90"
                                IsReadOnly="True"/>

                    <!-- Здесь важные изменения: TwoWay, UpdateSourceTrigger -->
                    <DataGridCheckBoxColumn Header="Избранное"
                        Binding="{Binding IsFavorite, Mode=OneWay}"
                        Width="*"
                        MinWidth="80"
                        IsReadOnly="True"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

    </DockPanel>
</Window>